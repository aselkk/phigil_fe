<div class="flex min-w-0 flex-auto flex-col">
    <fuse-loading-bar setAutoMode="true"></fuse-loading-bar>
    <!-- Main -->
    <div class="flex-auto p-6 sm:p-10">
        <!-- CONTENT GOES HERE -->
        <div class="h-full rounded-2xl border-2 border-dashed border-gray-300">
            <div
                class="flex h-full min-w-0 flex-col items-center justify-center"
            >
                <div class="prose prose-sm w-full max-w-md">
                    <form
                        #onboardingNgForm="ngForm"
                        [formGroup]="uploadForm"
                        class="bg-card mx-auto mt-8 flex w-full flex-col overflow-hidden rounded-2xl p-8 pb-4 shadow sm:max-w-sm"
                    >
                        <div class="gt-xs:flex-row flex flex-col">
                            <mat-form-field class="gt-xs:pr-3 flex-auto">
                                <mat-label>Name</mat-label>
                                <input
                                    matInput
                                    [formControlName]="'username'"
                                />
                                @if (
                                    uploadForm
                                        .get('username')
                                        .hasError('required')
                                ) {
                                    <mat-error> Name is required </mat-error>
                                }
                            </mat-form-field>
                            <mat-form-field class="gt-xs:pl-3 flex-auto">
                                <mat-label>Team</mat-label>
                                <input matInput [formControlName]="'team'" />
                                @if (
                                    uploadForm.get('team').hasError('required')
                                ) {
                                    <mat-error>
                                        Team name is required
                                    </mat-error>
                                }
                            </mat-form-field>
                        </div>
                        <input
                            type="file"
                            id="files"
                            (change)="onFileSelected($event)"
                            style="display: none"
                        />
                        <button
                            type="button"
                            mat-flat-button
                            [color]="'accent'"
                            (click)="triggerFileInput()"
                            class="mb-3 flex items-center"
                        >
                            <mat-icon
                                [svgIcon]="'heroicons_outline:plus'"
                            ></mat-icon>
                            <span class="ml-2 mr-1">
                                {{
                                    selectedFile
                                        ? 'Change photo'
                                        : 'Upload photo'
                                }}
                            </span>
                        </button>
                        <img
                            *ngIf="filePreview"
                            [src]="filePreview"
                            alt="Selected Image"
                            class="mt-4 w-24 rounded-md border"
                        />

                        <!-- <button
                            mat-raised-button
                            [color]="'primary'"
                            type="submit"
                            [disabled]="!uploadForm.valid || !selectedFile"
                        >
                            Submit
                        </button> -->
                        <button
                            class="fuse-mat-button-large mt-6 w-full"
                            mat-flat-button
                            [color]="'primary'"
                            [disabled]="uploadForm.disabled"
                            (click)="onSubmit()"
                            [disabled]="!uploadForm.valid || !selectedFile"
                        >
                            @if (!uploadForm.disabled) {
                                <span> Submitr </span>
                            }
                            @if (uploadForm.disabled) {
                                <span> Submit r</span>
                            }
                        </button>
                    </form>
                </div>
                @if (showAlert) {
                    <fuse-alert
                        class="m-8"
                        [appearance]="'outline'"
                        [showIcon]="false"
                        [type]="alert.type"
                        [@shake]="alert.type === 'error'"
                    >
                        {{ alert.message }}
                    </fuse-alert>
                }
            </div>
        </div>
    </div>
</div>
